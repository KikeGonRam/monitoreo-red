<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mi Monitor RED — Dashboard Optimizado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
:root {
  --neon-blue: #00f3ff;
  --neon-purple: #b967ff;
  --neon-green: #00ff9d;
  --neon-pink: #ff00ff;
  --neon-orange: #ff6b00;
  --bg-primary: #0a0a0f;
  --bg-secondary: #12121a;
  --bg-tertiary: #1a1a24;
  --bg-card: rgba(18, 18, 26, 0.9);
  --text-primary: #ffffff;
  --text-secondary: #a0a0c0;
  --text-tertiary: #707090;
  --border-color: rgba(0, 243, 255, 0.2);
  --font-main: 'Inter', sans-serif;
  --font-tech: 'Orbitron', monospace;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: var(--font-main);
  background: var(--bg-primary);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 50%, rgba(0, 243, 255, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(185, 103, 255, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 40% 80%, rgba(0, 255, 157, 0.05) 0%, transparent 50%);
  z-index: -1;
  pointer-events: none;
}

/* Header Compacto */
.header {
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
  padding: 15px 30px;
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(10px);
}

.header-content {
  max-width: 1600px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo-icon {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
}

.logo-text h1 {
  font-family: var(--font-tech);
  font-size: 18px;
  letter-spacing: 2px;
  background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.logo-text p {
  font-size: 10px;
  color: var(--text-tertiary);
  letter-spacing: 1px;
}

.header-status {
  display: flex;
  gap: 20px;
  align-items: center;
}

.status-badge {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: rgba(0, 255, 157, 0.1);
  border: 1px solid rgba(0, 255, 157, 0.3);
  border-radius: 20px;
  font-size: 11px;
  font-weight: 600;
  color: var(--neon-green);
  font-family: var(--font-tech);
}

.status-badge.error {
  background: rgba(255, 0, 255, 0.1);
  border-color: rgba(255, 0, 255, 0.3);
  color: var(--neon-pink);
}

.pulse-dot {
  width: 8px;
  height: 8px;
  background: var(--neon-green);
  border-radius: 50%;
  animation: pulse-dot 1.5s ease-in-out infinite;
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

.header-actions {
  display: flex;
  gap: 10px;
}

.btn-icon {
  width: 36px;
  height: 36px;
  background: rgba(0, 243, 255, 0.1);
  border: 1px solid rgba(0, 243, 255, 0.3);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--neon-blue);
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-icon:hover {
  background: rgba(0, 243, 255, 0.2);
  border-color: var(--neon-blue);
  transform: translateY(-2px);
}

/* Layout Principal */
.main-container {
  max-width: 1600px;
  margin: 0 auto;
  padding: 25px;
}

/* Grid de Métricas Principales */
.metrics-hero {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-bottom: 25px;
}

.metric-hero {
  background: var(--bg-card);
  border: 1px solid rgba(0, 243, 255, 0.2);
  border-radius: 12px;
  padding: 20px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.metric-hero:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0, 243, 255, 0.2);
}

.metric-hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
}

.metric-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 15px;
}

.metric-label {
  font-size: 11px;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.metric-icon {
  width: 32px;
  height: 32px;
  background: rgba(0, 243, 255, 0.1);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  color: var(--neon-blue);
}

.metric-value {
  font-family: var(--font-tech);
  font-size: 32px;
  font-weight: 700;
  background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  line-height: 1;
  margin-bottom: 5px;
}

.metric-change {
  font-size: 12px;
  color: var(--neon-green);
  display: flex;
  align-items: center;
  gap: 5px;
}

.metric-change.negative {
  color: var(--neon-orange);
}

/* Grid Principal de Contenido */
.content-grid {
  display: grid;
  grid-template-columns: 1fr 400px;
  gap: 25px;
  margin-bottom: 25px;
}

.card {
  background: var(--bg-card);
  border: 1px solid rgba(0, 243, 255, 0.2);
  border-radius: 12px;
  overflow: hidden;
  backdrop-filter: blur(10px);
}

.card-header {
  padding: 20px;
  background: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid rgba(0, 243, 255, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.card-title {
  font-family: var(--font-tech);
  font-size: 14px;
  letter-spacing: 1px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-actions {
  display: flex;
  gap: 8px;
}

.card-content {
  padding: 20px;
  max-height: 500px;
  overflow-y: auto;
}

.card-content::-webkit-scrollbar {
  width: 6px;
}

.card-content::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.card-content::-webkit-scrollbar-thumb {
  background: rgba(0, 243, 255, 0.3);
  border-radius: 3px;
}

.card-content::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 243, 255, 0.5);
}

/* Gráficas */
.chart-container {
  position: relative;
  height: 300px;
  margin-bottom: 20px;
}

.chart-legend {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 15px;
  flex-wrap: wrap;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-secondary);
}

.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

/* Tabs de Red Mejorados */
.network-tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.tab {
  flex: 1;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(0, 243, 255, 0.1);
  border-radius: 8px;
  padding: 15px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.tab.active {
  background: rgba(0, 243, 255, 0.1);
  border-color: var(--neon-blue);
}

.tab-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.tab-name {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 600;
  font-family: var(--font-tech);
}

.tab-count {
  font-size: 11px;
  color: var(--text-tertiary);
  font-family: var(--font-tech);
}

.tab-stats {
  display: flex;
  gap: 15px;
  font-size: 11px;
  color: var(--text-tertiary);
}

/* Tabla de Dispositivos Optimizada */
.devices-table {
  width: 100%;
  border-collapse: collapse;
}

.devices-table thead {
  position: sticky;
  top: 0;
  background: var(--bg-card);
  z-index: 10;
}

.devices-table th {
  padding: 12px 15px;
  text-align: left;
  font-size: 11px;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
  border-bottom: 1px solid rgba(0, 243, 255, 0.2);
}

.devices-table td {
  padding: 12px 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  font-size: 13px;
}

.devices-table tr:hover {
  background: rgba(0, 243, 255, 0.05);
}

.ip-cell {
  font-family: var(--font-tech);
  font-weight: 600;
  color: var(--neon-blue);
}

.mac-cell {
  font-family: monospace;
  color: var(--text-secondary);
  font-size: 11px;
}

.hostname-cell {
  color: var(--text-secondary);
}

.status-cell {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  font-family: var(--font-tech);
}

.status-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.status-online .status-indicator {
  background: var(--neon-green);
  box-shadow: 0 0 10px var(--neon-green);
}

.status-offline .status-indicator {
  background: var(--neon-orange);
  box-shadow: 0 0 10px var(--neon-orange);
}

/* Lista de Monitores Compacta */
.monitors-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.monitor-item {
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(0, 243, 255, 0.1);
  border-radius: 8px;
  padding: 15px;
  transition: all 0.3s ease;
}

.monitor-item:hover {
  border-color: var(--neon-blue);
  transform: translateX(5px);
}

.monitor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.monitor-name {
  font-size: 13px;
  font-weight: 600;
  font-family: var(--font-tech);
  color: var(--text-primary);
}

.monitor-status {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
  font-family: var(--font-tech);
}

.monitor-status.online {
  background: rgba(0, 255, 157, 0.1);
  color: var(--neon-green);
  border: 1px solid rgba(0, 255, 157, 0.3);
}

.monitor-status.offline {
  background: rgba(255, 107, 0, 0.1);
  color: var(--neon-orange);
  border: 1px solid rgba(255, 107, 0, 0.3);
}

.monitor-details {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: var(--text-tertiary);
}

.monitor-latency {
  display: flex;
  align-items: center;
  gap: 5px;
  color: var(--neon-blue);
  font-family: var(--font-tech);
}

/* Controles en Sidebar */
.controls-panel {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.control-btn {
  background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
  border: none;
  border-radius: 8px;
  padding: 15px;
  color: var(--text-primary);
  font-family: var(--font-tech);
  font-size: 12px;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.control-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(0, 243, 255, 0.3);
}

.control-btn.secondary {
  background: rgba(0, 243, 255, 0.1);
  border: 1px solid rgba(0, 243, 255, 0.3);
}

.toggle-control {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(0, 243, 255, 0.1);
  border-radius: 8px;
}

.toggle-label {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  font-family: var(--font-tech);
}

.toggle-switch {
  position: relative;
  width: 50px;
  height: 26px;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 243, 255, 0.1);
  border: 1px solid rgba(0, 243, 255, 0.3);
  border-radius: 34px;
  transition: .4s;
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background: var(--neon-blue);
  border-radius: 50%;
  transition: .4s;
}

input:checked + .toggle-slider {
  background: rgba(0, 243, 255, 0.2);
}

input:checked + .toggle-slider:before {
  transform: translateX(24px);
  background: var(--neon-green);
}

.server-info {
  padding: 15px;
  background: rgba(0, 243, 255, 0.05);
  border-radius: 8px;
  border: 1px solid rgba(0, 243, 255, 0.2);
}

.server-ip {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 15px;
}

.ip-label {
  font-size: 11px;
  color: var(--text-tertiary);
  text-transform: uppercase;
}

.ip-value {
  font-family: var(--font-tech);
  font-size: 16px;
  font-weight: 700;
  color: var(--neon-blue);
}

.server-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.server-stat {
  text-align: center;
  padding: 10px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 6px;
}

.server-stat-value {
  font-family: var(--font-tech);
  font-size: 14px;
  font-weight: 700;
  color: var(--neon-purple);
  margin-bottom: 4px;
}

.server-stat-label {
  font-size: 9px;
  color: var(--text-tertiary);
  text-transform: uppercase;
}

/* Footer Compacto */
.footer {
  background: var(--bg-secondary);
  border-top: 1px solid var(--border-color);
  padding: 12px 30px;
  margin-top: 25px;
}

.footer-content {
  max-width: 1600px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.terminal-text {
  font-family: monospace;
  font-size: 11px;
  color: var(--text-secondary);
}

.terminal-prompt {
  color: var(--neon-green);
  margin-right: 8px;
}

.version-badge {
  font-size: 11px;
  color: var(--text-tertiary);
  font-family: var(--font-tech);
}

/* Estados de Carga */
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: var(--text-tertiary);
  font-family: var(--font-tech);
  font-size: 12px;
}

.scan-line {
  width: 100%;
  max-width: 200px;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
  margin-bottom: 20px;
  position: relative;
  overflow: hidden;
}

.scan-line::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, white, transparent);
  animation: scanning 2s ease-in-out infinite;
}

@keyframes scanning {
  0% { left: -100%; }
  100% { left: 100%; }
}

/* Responsive */
@media (max-width: 1200px) {
  .content-grid {
    grid-template-columns: 1fr;
  }
  
  .metrics-hero {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .header-content {
    flex-direction: column;
    gap: 15px;
  }
  
  .metrics-hero {
    grid-template-columns: 1fr;
  }
  
  .network-tabs {
    flex-direction: column;
  }
}
  </style>
</head>
<body>
  <!-- Header Compacto -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">
          <i class="fas fa-satellite-dish"></i>
        </div>
        <div class="logo-text">
          <h1>MI MONITOR RED</h1>
          <p>DASHBOARD EN TIEMPO REAL</p>
        </div>
      </div>
      
      <div class="header-status">
        <div class="status-badge" id="system-status">
          <span class="pulse-dot"></span>
          <span>OPERATIVO</span>
        </div>
        
        <div class="header-actions">
          <button class="btn-icon" id="refresh-btn" title="Actualizar">
            <i class="fas fa-sync-alt"></i>
          </button>
          <button class="btn-icon" id="settings-btn" title="Configuración">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Container -->
  <main class="main-container">
    <!-- Métricas Hero -->
    <section class="metrics-hero">
      <div class="metric-hero">
        <div class="metric-header">
          <div>
            <div class="metric-label">Total Monitores</div>
            <div class="metric-value" id="total-monitors">--</div>
            <div class="metric-change">
              <i class="fas fa-arrow-up"></i>
              <span>100% online</span>
            </div>
          </div>
          <div class="metric-icon">
            <i class="fas fa-server"></i>
          </div>
        </div>
      </div>
      
      <div class="metric-hero">
        <div class="metric-header">
          <div>
            <div class="metric-label">Dispositivos Activos</div>
            <div class="metric-value" id="active-devices">--</div>
            <div class="metric-change">
              <i class="fas fa-wifi"></i>
              <span id="active-percent">--% conectados</span>
            </div>
          </div>
          <div class="metric-icon">
            <i class="fas fa-network-wired"></i>
          </div>
        </div>
      </div>
      
      <div class="metric-hero">
        <div class="metric-header">
          <div>
            <div class="metric-label">Latencia Media</div>
            <div class="metric-value" id="avg-latency">--</div>
            <div class="metric-change">
              <i class="fas fa-signal"></i>
              <span>Excelente</span>
            </div>
          </div>
          <div class="metric-icon">
            <i class="fas fa-tachometer-alt"></i>
          </div>
        </div>
      </div>
      
      <div class="metric-hero">
        <div class="metric-header">
          <div>
            <div class="metric-label">Tiempo Activo</div>
            <div class="metric-value" id="uptime">00:00:00</div>
            <div class="metric-change">
              <i class="fas fa-clock"></i>
              <span id="last-check">--:--:--</span>
            </div>
          </div>
          <div class="metric-icon">
            <i class="fas fa-history"></i>
          </div>
        </div>
      </div>
    </section>

    <!-- Grid Principal -->
    <div class="content-grid">
      <!-- Columna Principal -->
      <div>
        <!-- Gráficas de Rendimiento -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <i class="fas fa-chart-line"></i>
              RENDIMIENTO DE RED
            </div>
            <div class="card-actions">
              <button class="btn-icon">
                <i class="fas fa-expand"></i>
              </button>
            </div>
          </div>
          <div class="card-content">
            <div class="chart-container">
              <canvas id="latencyChart"></canvas>
            </div>
            <div class="chart-legend">
              <div class="legend-item">
                <div class="legend-dot" style="background: var(--neon-blue)"></div>
                <span>Latencia Promedio</span>
              </div>
              <div class="legend-item">
                <div class="legend-dot" style="background: var(--neon-green)"></div>
                <span>Dispositivos Online</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Mapa de Red -->
        <div class="card" style="margin-top: 25px;">
          <div class="card-header">
            <div class="card-title">
              <i class="fas fa-globe-americas"></i>
              MAPA DE RED
            </div>
            <button class="btn-icon" id="scan-btn">
              <i class="fas fa-radar"></i>
            </button>
          </div>
          <div class="card-content">
            <div class="network-tabs">
              <div class="tab active" data-network="2.4G">
                <div class="tab-header">
                  <div class="tab-name">
                    <i class="fas fa-wifi"></i>
                    <span>RED 2.4G</span>
                  </div>
                  <div class="tab-count" id="count-2.4G">--/--</div>
                </div>
                <div class="tab-stats">
                  <span>192.168.1.0/24</span>
                </div>
              </div>
              
              <div class="tab" data-network="5G">
                <div class="tab-header">
                  <div class="tab-name">
                    <i class="fas fa-bolt"></i>
                    <span>RED 5G</span>
                  </div>
                  <div class="tab-count" id="count-5G">--/--</div>
                </div>
                <div class="tab-stats">
                  <span>192.168.2.0/24</span>
                </div>
              </div>
            </div>

            <div id="networks-container">
              <div class="loading-state">
                <div class="scan-line"></div>
                <p>ESCANEANDO REDES...</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar Derecha -->
      <div>
        <!-- Monitores Activos -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <i class="fas fa-satellite"></i>
              MONITORES
            </div>
          </div>
          <div class="card-content">
            <div id="monitors-list">
              <div class="loading-state">
                <div class="scan-line"></div>
                <p>CARGANDO...</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Controles -->
        <div class="card" style="margin-top: 25px;">
          <div class="card-header">
            <div class="card-title">
              <i class="fas fa-cogs"></i>
              CONTROLES
            </div>
          </div>
          <div class="card-content">
            <div class="controls-panel">
              <div class="toggle-control">
                <div class="toggle-label">
                  <i class="fas fa-redo"></i>
                  <span>AUTO-REFRESH</span>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="auto-refresh" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="server-info">
                <div class="server-ip">
                  <span class="ip-label">Servidor Local</span>
                  <span class="ip-value" id="server-ip">192.168.1.89</span>
                </div>
                <div class="server-stats">
                  <div class="server-stat">
                    <div class="server-stat-value">Ubuntu</div>
                    <div class="server-stat-label">SISTEMA</div>
                  </div>
                  <div class="server-stat">
                    <div class="server-stat-value">Nginx</div>
                    <div class="server-stat-label">WEB</div>
                  </div>
                  <div class="server-stat">
                    <div class="server-stat-value">Local</div>
                    <div class="server-stat-label">RED</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Distribución de Red -->
        <div class="card" style="margin-top: 25px;">
          <div class="card-header">
            <div class="card-title">
              <i class="fas fa-chart-pie"></i>
              DISTRIBUCIÓN
            </div>
          </div>
          <div class="card-content">
            <div class="chart-container" style="height: 250px;">
              <canvas id="distributionChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="terminal-text">
        <span class="terminal-prompt">></span>
        <span id="terminal-output">SISTEMA INICIADO</span>
      </div>
      <div class="version-badge">
        <i class="fas fa-code-branch"></i> v2.0 • LOCALHOST
      </div>
    </div>
  </footer>

  <script>
// Datos simulados
let monitorsData = [];
let devicesData = [];
let currentNetwork = '2.4G';
let startTime = Date.now();
let latencyChart, distributionChart;

// Elementos DOM
const elements = {
  systemStatus: document.getElementById('system-status'),
  totalMonitors: document.getElementById('total-monitors'),
  activeDevices: document.getElementById('active-devices'),
  activePercent: document.getElementById('active-percent'),
  avgLatency: document.getElementById('avg-latency'),
  uptime: document.getElementById('uptime'),
  lastCheck: document.getElementById('last-check'),
  monitorsList: document.getElementById('monitors-list'),
  networksContainer: document.getElementById('networks-container'),
  terminalOutput: document.getElementById('terminal-output'),
  refreshBtn: document.getElementById('refresh-btn'),
  scanBtn: document.getElementById('scan-btn'),
  autoRefresh: document.getElementById('auto-refresh'),
  serverIp: document.getElementById('server-ip'),
  count24G: document.getElementById('count-2.4G'),
  count5G: document.getElementById('count-5G')
};

// Funciones de utilidad
function formatTime(ms) {
  const totalSeconds = Math.floor(ms / 1000);
  const hours = Math.floor(totalSeconds / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);
  const seconds = totalSeconds % 60;
  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

function updateUptime() {
  const elapsed = Date.now() - startTime;
  if (elements.uptime) elements.uptime.textContent = formatTime(elapsed);
}

function logTerminal(message) {
  const timestamp = new Date().toLocaleTimeString('es-ES', { hour12: false });
  if (elements.terminalOutput) elements.terminalOutput.textContent = `${message}`;
}

// Inicializar gráficas
function initCharts() {
  // Gráfica de latencia
  const latencyCtx = document.getElementById('latencyChart');
  if (latencyCtx) {
    latencyChart = new Chart(latencyCtx, {
      type: 'line',
      data: {
        labels: ['00:00', '05:00', '10:00', '15:00', '20:00', '25:00', '30:00'],
        datasets: [{
          label: 'Latencia (ms)',
          data: [4.2, 3.8, 4.5, 3.9, 4.1, 3.7, 4.3],
          borderColor: 'rgb(0, 243, 255)',
          backgroundColor: 'rgba(0, 243, 255, 0.1)',
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: 'rgba(18, 18, 26, 0.9)',
            borderColor: 'rgba(0, 243, 255, 0.3)',
            borderWidth: 1
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            grid: { color: 'rgba(0, 243, 255, 0.1)' },
            ticks: { color: '#707090' }
          },
          x: {
            grid: { color: 'rgba(0, 243, 255, 0.1)' },
            ticks: { color: '#707090' }
          }
        }
      }
    });
  }

  // Gráfica de distribución
  const distCtx = document.getElementById('distributionChart');
  if (distCtx) {
    distributionChart = new Chart(distCtx, {
      type: 'doughnut',
      data: {
        labels: ['Online', 'Offline', 'Monitoreados'],
        datasets: [{
          data: [8, 2, 4],
          backgroundColor: [
            'rgba(0, 255, 157, 0.8)',
            'rgba(255, 107, 0, 0.8)',
            'rgba(0, 243, 255, 0.8)'
          ],
          borderColor: [
            'rgb(0, 255, 157)',
            'rgb(255, 107, 0)',
            'rgb(0, 243, 255)'
          ],
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: { color: '#a0a0c0', padding: 15 }
          }
        }
      }
    });
  }
}

// Fetch de datos
async function fetchMonitors() {
  try {
    const response = await fetch('/api/monitors');
    const data = await response.json();
    monitorsData = data.results || [];
    renderMonitors();
    updateMetrics();
    logTerminal('Monitores actualizados');
    return true;
  } catch (error) {
    console.error('Error:', error);
    logTerminal('Error al obtener monitores');
    return false;
  }
}

async function fetchDevices() {
  try {
    const response = await fetch('/api/devices');
    const data = await response.json();
    devicesData = data.networks || [];
    renderNetworks();
    updateNetworkCounts();
    logTerminal('Dispositivos actualizados');
    return true;
  } catch (error) {
    console.error('Error:', error);
    logTerminal('Error al escanear dispositivos');
    return false;
  }
}

// Actualizar métricas
function updateMetrics() {
  if (monitorsData.length === 0) return;
  
  const active = monitorsData.filter(m => m.ok).length;
  elements.totalMonitors.textContent = monitorsData.length;
  
  const validLatencies = monitorsData.filter(m => m.ok && m.rtt_ms).map(m => m.rtt_ms);
  if (validLatencies.length > 0) {
    const avg = validLatencies.reduce((a, b) => a + b, 0) / validLatencies.length;
    elements.avgLatency.textContent = `${avg.toFixed(1)} ms`;
  }
  
  elements.lastCheck.textContent = new Date().toLocaleTimeString('es-ES', { hour12: false });
}

function updateNetworkCounts() {
  let totalDevices = 0;
  let activeCount = 0;
  
  devicesData.forEach(network => {
    const devices = network.devices || [];
    totalDevices += devices.length;
    activeCount += devices.filter(d => d.ok).length;
    
    if (network.nombre === '2.4G' || network.cidr === '192.168.1.0/24') {
      const online = devices.filter(d => d.ok).length;
      elements.count24G.textContent = `${online}/${devices.length}`;
    } else if (network.nombre === '5G' || network.cidr === '192.168.2.0/24') {
      const online = devices.filter(d => d.ok).length;
      elements.count5G.textContent = `${online}/${devices.length}`;
    }
  });
  
  elements.activeDevices.textContent = activeCount;
  if (totalDevices > 0) {
    const percent = Math.round((activeCount / totalDevices) * 100);
    elements.activePercent.textContent = `${percent}% conectados`;
  }
  
  // Actualizar gráfica de distribución
  if (distributionChart) {
    const monitored = monitorsData.length;
    distributionChart.data.datasets[0].data = [activeCount, totalDevices - activeCount, monitored];
    distributionChart.update();
  }
}

// Renderizar monitores
function renderMonitors() {
  if (!elements.monitorsList) return;
  if (monitorsData.length === 0) {
    elements.monitorsList.innerHTML = `
      <div class="loading-state">
        <div class="scan-line"></div>
        <p>NO HAY MONITORES</p>
      </div>`;
    return;
  }

  let html = '';
  monitorsData.forEach(monitor => {
    const statusClass = monitor.ok ? 'online' : 'offline';
    const statusText = monitor.ok ? 'ONLINE' : 'OFFLINE';
    html += `
      <div class="monitor-item">
        <div class="monitor-header">
          <div class="monitor-name">${monitor.name || monitor.host}</div>
          <div class="monitor-status ${statusClass}">
            <span class="status-indicator"></span>
            <span>${statusText}</span>
          </div>
        </div>
        <div class="monitor-details">
          <span>${monitor.host || '--'}</span>
          ${monitor.rtt_ms ? `<span class="monitor-latency"><i class="fas fa-signal"></i> ${monitor.rtt_ms}ms</span>` : ''}
        </div>
      </div>`;
  });
  elements.monitorsList.innerHTML = html;
}

// Renderizar redes
function renderNetworks() {
  if (!elements.networksContainer) return;
  if (devicesData.length === 0) {
    elements.networksContainer.innerHTML = `
      <div class="loading-state">
        <div class="scan-line"></div>
        <p>NO SE ENCONTRARON REDES</p>
      </div>`;
    return;
  }

  const currentNetworkData = devicesData.find(n => 
    n.nombre === currentNetwork || 
    (currentNetwork === '2.4G' && n.cidr === '192.168.1.0/24') ||
    (currentNetwork === '5G' && n.cidr === '192.168.2.0/24')
  );

  if (!currentNetworkData) {
    elements.networksContainer.innerHTML = `
      <div class="loading-state">
        <div class="scan-line"></div>
        <p>RED NO DISPONIBLE</p>
      </div>`;
    return;
  }

  const devices = currentNetworkData.devices || [];
  let html = `
    <table class="devices-table">
      <thead>
        <tr>
          <th>IP</th>
          <th>MAC</th>
          <th>HOSTNAME</th>
          <th>ESTADO</th>
        </tr>
      </thead>
      <tbody>`;

  if (devices.length === 0) {
    html += `<tr><td colspan="4" style="text-align:center;padding:40px;color:var(--text-tertiary);">NO HAY DISPOSITIVOS</td></tr>`;
  } else {
    devices.forEach(device => {
      const statusClass = device.ok ? 'status-online' : 'status-offline';
      const statusText = device.ok ? 'ONLINE' : 'OFFLINE';
      html += `
        <tr>
          <td class="ip-cell">${device.ip}</td>
          <td class="mac-cell">${device.mac || '--'}</td>
          <td class="hostname-cell">${device.hostname || '--'}</td>
          <td>
            <div class="status-cell ${statusClass}">
              <span class="status-indicator"></span>
              <span>${statusText}</span>
            </div>
          </td>
        </tr>`;
    });
  }

  html += `</tbody></table>`;
  elements.networksContainer.innerHTML = html;
}

// Refrescar todo
async function refreshAll() {
  logTerminal('ACTUALIZANDO...');
  elements.refreshBtn.disabled = true;
  elements.refreshBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
  
  await fetchMonitors();
  await fetchDevices();
  
  setTimeout(() => {
    elements.refreshBtn.disabled = false;
    elements.refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i>';
    logTerminal('ACTUALIZACIÓN COMPLETADA');
  }, 500);
}

// Setup
function setupAutoRefresh() {
  let autoRefreshInterval = null;
  function setAutoRefresh(enabled) {
    if (autoRefreshInterval) clearInterval(autoRefreshInterval);
    autoRefreshInterval = null;
    if (enabled) autoRefreshInterval = setInterval(refreshAll, 30000);
  }
  setAutoRefresh(elements.autoRefresh.checked);
  elements.autoRefresh.addEventListener('change', (e) => {
    setAutoRefresh(e.target.checked);
    logTerminal(`AUTO-REFRESH ${e.target.checked ? 'ON' : 'OFF'}`);
  });
}

function setupNetworkTabs() {
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', function() {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      currentNetwork = this.dataset.network;
      renderNetworks();
      logTerminal(`CAMBIO A RED: ${currentNetwork}`);
    });
  });
}

// Inicialización
document.addEventListener('DOMContentLoaded', () => {
  initCharts();
  
  elements.refreshBtn.addEventListener('click', refreshAll);
  elements.scanBtn.addEventListener('click', () => {
    logTerminal('ESCANEANDO...');
    fetchDevices();
  });
  
  setupAutoRefresh();
  setupNetworkTabs();
  
  setInterval(updateUptime, 1000);
  elements.serverIp.textContent = window.location.hostname || '192.168.1.89';
  
  logTerminal('SISTEMA INICIADO');
  refreshAll();
});
  </script>
</body>
</html>